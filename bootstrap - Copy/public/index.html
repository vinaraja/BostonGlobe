<!DOCTYPE html>
<html lang="en">
  <head>
 
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>News Updates</title>

    <!-- Bootstrap -->
    <link href="css/bootstrap.min.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
     <style>
	 @font-face{
		 font-family:cal;
		 src:url(css/Kingthings_Foundation.ttf);
	 }
		body {
		padding-top: 3px;
		padding-right: 50px;
		padding-bottom: 5px;
		padding-left: 50px;
	 background: -webkit-linear-gradient( #DDD, #EEE); /* For Safari 5.1 to 6.0 */
    background: -o-linear-gradient( #DDD, #EEE); /* For Opera 11.1 to 12.0 */
    background: -moz-linear-gradient( #DDD, #EEE); /* For Firefox 3.6 to 15 */
    background: linear-gradient( #DDD, #EEE); /* Standard syntax (must be last) */
	}
	.container-fluid{
		height:80px;
		color:white;
		background-color:#800;
	}
</style>
  </head>
  <body onLoad="onInterval()">
  
  <div class="container-fluid" >
       <div class="row" >
        <div class="col-md-2" style="height:80px; padding-top:20px; padding-bottom:20px; padding-left:25px; padding-right:2px; " >
        <img src="img/free-vector-cnn-logo_092046_CNN_logo.png" style="height:40px; "> </img>
        </div>
        <div class="col-md-3"></div>
                <div class="col-md-3">
                        <div class="navbar-header">
                        <h1 style="color:#FFF;font-family:cal;" >Live News feed</h1>
                        </div>
                </div>
            <div class="col-md-4"></div>
        </div>
    </div>
    <br>
    
    
     
  
  <div id="carousel-example-generic" class="carousel slide" data-ride="carousel" data-interval="25000">
  <!-- Indicators -->
  <ol class="carousel-indicators">
    <li data-target="#carousel-example-generic" data-slide-to="0" class="active"></li>
    <li data-target="#carousel-example-generic" data-slide-to="1"></li>
    <li data-target="#carousel-example-generic" data-slide-to="2"></li>
    <li data-target="#carousel-example-generic" data-slide-to="3"></li>
    <li data-target="#carousel-example-generic" data-slide-to="4"></li>
    <li data-target="#carousel-example-generic" data-slide-to="5"></li>
  </ol>
  
  <div class="carousel-inner" role="listbox">
    <div class="item active">
    <div class="row" >
    <div class="col-md-12">
    		<div class="panel ">
            	<div class="panel-body">
                    <div class="media" >
                          <div id="test1" class="media-left" style="border:1px solid">
                            
                          </div>
                          <br>
                          <div class="media-body">
                             <h1 id="World1" class="media-heading"></h1>
                                    <h1 id="text0"></text>
                          </div>
                    </div>
                 </div>
            </div>
		</div>
       </div>
    </div>
        
         <div class="item ">
	    <div class="row" >
    <div class="col-md-12">
    		<div class="panel panel-primary">
            	<div class="panel-body">
                    <div class="media" >
                          <div  id="test2" class="media-left" style="border:1px solid">
                          </div>
                          <br>
                          <div class="media-body">
                          <h1 id="World2" class="media-heading"></h1>
                                    <h1 id="text1"></text>
                          </div>
                    </div>
                 </div>
            </div>
		</div>
       </div>
    </div>
        
    <div class="item">
    	<div class="row">    
			<div class="col-md-12">
            	<div class="panel panel-primary">
                        <div class="panel-body">
                            <div class="media">
                                  <div id="test3" class="media-left">
                                    
                                  </div>
                                  <br>
                                  <div class="media-body">
                                   <h1 id="World3" class="media-heading"></h1>
                                    <h1 id="text2"></text>
                                  </div>
                            </div>
                          </div>
                  </div>
			</div>
          </div>
       </div>
         
      <div class="item"> 
          <div class="row">
			<div class="col-md-12">
                <div class="panel panel-primary">
                            <div class="panel-body">
                                    <div class="media">
                                  <div id="test4" class="media-left">
                                    
                                  </div>
                                  <br>
                                  <div class="media-body">
                                    <h1 id="World4" class="media-heading"></h1>
                                    <h1 id="text3"></text>
                                  </div>
                            </div>
                          </div>
                      </div>      
			</div>
         </div>   
      </div>
        
    <div class="item">
       <div class="row">    
			<div class="col-md-12">
            	<div class="panel panel-primary">
                        <div class="panel-body">
                            <div class="media">
                                  <div id="test5" class="media-left">
                                    
                                  </div>
                                  <br>
                                  <div class="media-body">
                                     <h1 id="World5" class="media-heading"></h1>
                                    <h1 id="text4"></text>
                                  </div>
                            </div>
                          </div>
                  </div>
			</div>
          </div>
       </div>
          
     <div class="item">
          <div class="row">
			<div class="col-md-12">
                <div class="panel panel-primary">
                            <div class="panel-body">
                                    <div class="media">
                                  <div id="test6" class="media-left">
                                   
                                  </div>
                                  <br>
                                  <div class="media-body">
                                   <h1 id="text5"></text>
                                  </div>
                            </div>
                          </div>
                      </div>      
			</div>
       </div>     
      </div>
    </div> 
    
      <a class="left carousel-control" href="#carousel-example-generic" role="button" data-slide="prev" hidden="true">
    <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
    <span class="sr-only">Previous</span>
  </a>
  <a class="right carousel-control" href="#carousel-example-generic" role="button" data-slide="next" hidden="true">
    <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
    <span class="sr-only">Next</span>
  </a>
</div>
		
	
	
	
	

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="js/bootstrap.min.js"></script>
    <script src="https://code.jquery.com/jquery-1.10.2.js"></script>
    <script>
	
	$( document ).ready(function() 
				{
					var interval=setInterval(onInterval,18000000);
				});
				function onInterval(){
				var myhttp = new XMLHttpRequest();
				var myhttp1 = new XMLHttpRequest();
				var myhttp2 = new XMLHttpRequest();
				var myhttp3 = new XMLHttpRequest();
				var myhttp4 = new XMLHttpRequest();
				var myhttp5 = new XMLHttpRequest();
       			var url = "http://localhost:3600/test";
				var url1 = "http://localhost:3600/technology";
				var url2 = "http://localhost:3600/student";
				var url3 = "http://localhost:3600/health";
				var url4 = "http://localhost:3600/entertainment";
				var url5 = "http://localhost:3600/travel";
				
				console.log("calling url");
				
				/**myhttp.open('GET', url, true);
       			myhttp.onreadystatechange = function() {        
           				if ((myhttp.readyState == 4) && (myhttp.status == 200)){
               			//alert(myhttp.responseText);
						data=myhttp.responseText;
						parser=new DOMParser();
   						xmlDoc=parser.parseFromString(data,"text/xml");
						for (i=1;i<9;i++)
						{
						var s=xmlDoc.getElementsByTagName("title")[i+1].childNodes[0].nodeValue;
						$('#World'+i).text(s);
						}
           			}
           			else if ((myhttp.readyState == 4) && (myhttp.status != 200))
           			{
               			console.log("Error in Connection");
           			}
				}
				myhttp.send();
				
				
				myhttp1.open('GET', url1, true);
       			myhttp1.onreadystatechange = function() {        
           				if ((myhttp1.readyState == 4) && (myhttp1.status == 200)){
               			//alert(myhttp.responseText);
						data=myhttp1.responseText;
						parser=new DOMParser();
   						xmlDoc=parser.parseFromString(data,"text/xml");
						for (i=1;i<9;i++)
						{
						var s=xmlDoc.getElementsByTagName("title")[i+1].childNodes[0].nodeValue;
						//console.log(s);
						$('#Technology'+i).text(s);
						}
           			}
           			else if ((myhttp1.readyState == 4) && (myhttp1.status != 200))
           			{
               			console.log("Error in Connection");
           			}
				}
				myhttp1.send();
				
				
				myhttp2.open('GET', url2, true);
       			myhttp2.onreadystatechange = function() {        
           				if ((myhttp2.readyState == 4) && (myhttp2.status == 200)){
               			//alert(myhttp.responseText);
						data=myhttp2.responseText;
						parser=new DOMParser();
   						xmlDoc=parser.parseFromString(data,"text/xml");
						for (i=1;i<9;i++)
						{
						var s=xmlDoc.getElementsByTagName("title")[i+1].childNodes[0].nodeValue;
						//console.log(s);
						$('#Student'+i).text(s);
						}
           			}
           			else if ((myhttp2.readyState == 4) && (myhttp2.status != 200))
           			{
               			console.log("Error in Connection");
           			}
				}
				myhttp2.send();
				
				
				myhttp3.open('GET', url3, true);
       			myhttp3.onreadystatechange = function() {        
           				if ((myhttp3.readyState == 4) && (myhttp3.status == 200)){
               			//alert(myhttp.responseText);
						data=myhttp3.responseText;
						parser=new DOMParser();
   						xmlDoc=parser.parseFromString(data,"text/xml");
						for (i=1;i<9;i++)
						{
						var s=xmlDoc.getElementsByTagName("title")[i+1].childNodes[0].nodeValue;
						//console.log(s);
						$('#Health'+i).text(s);
						}
           			}
           			else if ((myhttp3.readyState == 4) && (myhttp3.status != 200))
           			{
               			console.log("Error in Connection");
           			}
				}
				myhttp3.send();
				
				
				myhttp4.open('GET', url4, true);
       			myhttp4.onreadystatechange = function() {        
           				if ((myhttp4.readyState == 4) && (myhttp4.status == 200)){
               			//alert(myhttp.responseText);
						data=myhttp4.responseText;
						parser=new DOMParser();
   						xmlDoc=parser.parseFromString(data,"text/xml");
						for (i=1;i<9;i++)
						{
						var s=xmlDoc.getElementsByTagName("title")[i+1].childNodes[0].nodeValue;
						var q=xmlDoc.getElementsByTagName("description")[i+1].childNodes[0].nodeValue;
						var r=q.split("<");
						
						console.log(r[0]);
						//console.log(r[1]);
						//console.log(r[2]);
						$('#Entertainment'+i).text(s);
						}
           			}
           			else if ((myhttp4.readyState == 4) && (myhttp4.status != 200))
           			{
               			console.log("Error in Connection");
           			}
				}
				myhttp4.send();**/
				
				myhttp5.open('GET', url5, true);
       			myhttp5.onreadystatechange = function() {        
           				if ((myhttp5.readyState == 4) && (myhttp5.status == 200)){
               			//alert(myhttp.responseText);
						data=myhttp5.responseText;
						parser=new DOMParser();
   						xmlDoc=parser.parseFromString(data,"text/xml");
						 /**var x=xmlDoc.getElementsByTagName("item");
						 for (i=0;i<x.length;i++)
						 {
							 var img = $(x[i]).find('img').attr('src');
							 console.log(img);
						 }**/
						 var img = $(xmlDoc).find("description").text();
						 var p=img.split("<img src=");
						 //img = img.replace("<!\[CDATA\[", "").replace("\]\]>", "");
						 
						 for(i=1;i<6;i++)
						 {
						 var split1=p[i].split("><");
						 $('#test'+i).html("<img src='"+split1[0] +"'\>")
						 }
						 
						
						 
						/**var p=img.split("<img src=");
						 for (i=1;i<p.length;i++)
						 {
							 console.log(p[i]);
						 }**/
						 //dsr= dsr.substring(dsr.indexOf('>'), dsr.length);
						 //console.log(dsr);
						for (i=0;i<6;i++)
						{
						var s=xmlDoc.getElementsByTagName("title")[i].childNodes[0].nodeValue;
						var q=xmlDoc.getElementsByTagName("description")[i+1].childNodes[0].nodeValue;
						var l=q.split("<");
						
						
						$('#World'+i).text(s);
						$('#text'+i).text(l[0]);
						}
						 
           			}
           			else if ((myhttp5.readyState == 4) && (myhttp5.status != 200))
           			{
               			console.log("Error in Connection");
           			}
				}
				myhttp5.send();
				
				}
	</script>
  </body>
</html>